version: "3.1"
stories:

- story: test story 1
  steps:
  - user : |
      Hi
    intent: welcome_greet
  - action: utter_welcome_greet
  - user : |
      I would like to order a pizza
    intent: item_start_generic
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_amount
  - user : |
      [one](pizza_amount) please
    intent: item_start_generic
  - slot_was_set:
    - pizza_amount: one
  - action: pizza_order_form
  - slot_was_set:
    - pizza_amount: one
  - slot_was_set:
    - requested_slot: pizza_type
  - user : |
      [one](pizza_amount)[large](pizza_size) please
    intent: item_start_generic
  - slot_was_set:
    - pizza_amount: one
  - slot_was_set:
    - pizza_size: large
  - action: pizza_order_form
  - slot_was_set:
    - pizza_amount: one
  - slot_was_set:
    - pizza_size: large
  - slot_was_set:
    - requested_slot: pizza_type
  - user : |
      what types of pizza are available?
    intent: request_pizza_types
  - action: utter_init_request
  - action: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
  - user : |
      I'll take the [Margherita](pizza_type)
    intent: item_start_generic
  - slot_was_set:
    - pizza_type: Margherita
  - action: pizza_order_form
  - slot_was_set:
    - pizza_type: Margherita
  - slot_was_set:
    - requested_slot: pizza_crust
  - user : |
      which crusts can I choose?
    intent: request_pizza_crusts
  - action: utter_inform_pizza_crust
  - action: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_crust
  - user : |
      [stuffed](pizza_crust) crust please
    intent: item_start_generic
  - slot_was_set:
    - pizza_crust: stuffed
  - active_loop: null
  - action: action_confirm_order
  - slot_was_set:
    - current_order:
      - one medium stuffed crust Margherita
  - user : |
      correct. Can I order [two](pizza_amount) more pizza?
    intent: nlu_fallback
  - action: utter_default
  - user : |
      I want to order another pizza
    intent: item_start_generic
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - pizza_amount: two
  - slot_was_set:
    - pizza_type: Pepperoni
  - slot_was_set:
    - pizza_size: extra large
  - slot_was_set:
    - pizza_crust: thin
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_cancel_current_order
  - slot_was_set:
    - current_order: null
  - action: action_confirm_order
  - slot_was_set:
    - current_order:
      - one medium stuffed crust Margherita
  - user : |
      yes
    intent: response_positive
  - action: action_pizza_order_add
  - slot_was_set:
    - total_order:
      - one medium stuffed crust Margherita
  - slot_was_set:
    - pizza_type: null
  - slot_was_set:
    - pizza_size: null
  - slot_was_set:
    - pizza_amount: null
  - slot_was_set:
    - pizza_crust: null
  - slot_was_set:
    - pizza_toppings: null
  - slot_was_set:
    - current_order: null
  - action: action_next_order
  - action: utter_anything_else
  - user : |
      I want to order [one](pizza_amount) more pizza
    intent: item_start_generic
  - slot_was_set:
    - pizza_amount: one
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - pizza_amount: one
  - slot_was_set:
    - requested_slot: pizza_type
  - user : |
      a [Pepperoni](pizza_type)
    intent: item_start_generic
  - slot_was_set:
    - pizza_type: Pepperoni
  - action: pizza_order_form
  - slot_was_set:
    - pizza_type: Pepperoni
  - slot_was_set:
    - requested_slot: pizza_size
  - user : |
      [extra large](pizza_size) with a [thin](pizza_crust) crust
    intent: item_start_generic
  - slot_was_set:
    - pizza_crust: thin
  - slot_was_set:
    - pizza_size: extra large
  - action: pizza_order_form
  - slot_was_set:
    - pizza_crust: thin
  - slot_was_set:
    - pizza_size: extra large
  - action: pizza_order_form
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_confirm_order
  - slot_was_set:
    - current_order:
      - one extra large thin crust Pepperoni
  - user : |
      yes it's correct
    intent: response_positive
  - action: action_pizza_order_add
  - slot_was_set:
    - total_order:
      - one medium stuffed crust Margherita
      - one extra large thin crust Pepperoni
  - slot_was_set:
    - pizza_type: null
  - slot_was_set:
    - pizza_size: null
  - slot_was_set:
    - pizza_amount: null
  - slot_was_set:
    - pizza_crust: null
  - slot_was_set:
    - pizza_toppings: null
  - slot_was_set:
    - current_order: null
  - action: action_next_order
  - action: utter_anything_else
  - user : |
      no
    intent: response_negative
  - action: action_total_order
  - slot_was_set:
    - total_order: one medium stuffed crust Margherita and one extra large thin crust Pepperoni
  - user : |
      To take away
    intent: order_takeaway
  - slot_was_set:
    - takeaway_flag: true
  - action: takeaway_form
  - active_loop: takeaway_form
  - slot_was_set:
    - takeaway_flag: true
  - slot_was_set:
    - requested_slot: client_name
  - user : |
      [Leonardo](person_name)
    intent: client_name
  - slot_was_set:
    - client_name: Leonardo
  - action: takeaway_form
  - slot_was_set:
    - client_name: Leonardo
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_confirm_takeaway
  - user : |
      yes
    intent: response_positive
  - action: action_ask_time
  - slot_was_set:
    - requested_slot: time
  - user : |
      at [8](time)
    intent: time
  - slot_was_set:
    - time: 8
  - action: action_confirm_time
  - user : |
      I've changed my mind, I'll pick it up at [twelve](time)
    intent: time_change
  - action: action_change_time
  - slot_was_set:
    - time: twelve
  - action: action_confirm_time
  - user : |
      yes
    intent: response_positive
  - action: utter_final_order
  - action: utter_goodbye

- story: test story 2
  steps:
    - user: |
        Hi
      intent: welcome_greet
    - action: utter_welcome_greet
    - user: |
        I would like to order [five](pizza_amount) pizza
      intent: order_takeaway
    - slot_was_set:
        - pizza_amount: five
    - action: pizza_order_form
    - active_loop: pizza_order_form
    - slot_was_set:
        - requested_slot: pizza_type
    - user: |
        [Pepperoni](pizza_type)
      intent: request_pizza_types
    - slot_was_set:
        - pizza_type: Pepperoni
    - action: pizza_order_form
    - slot_was_set:
        - requested_slot: pizza_size
    - user: |
        [medium](pizza_size) size
      intent: request_pizza_sizes
    - slot_was_set:
        - pizza_size: medium
    - action: pizza_order_form
    - slot_was_set:
        - requested_slot: pizza_crust
    - user: |
        the [cracker](pizza_crust) crust
      intent: request_pizza_crusts
    - slot_was_set:
        - pizza_crust: cracker
    - action: pizza_order_form
    - slot_was_set:
        - requested_slot: null
    - active_loop: null
    - action: action_confirm_order
    - slot_was_set:
        - current_order:
            - five medium cracker crust Pepperoni
    - user: |
        yes
      intent: response_positive
    - action: action_pizza_order_add
    - slot_was_set:
        - total_order:
            - five medium cracker crust Pepperoni
    - slot_was_set:
        - pizza_type: null
    - slot_was_set:
        - pizza_size: null
    - slot_was_set:
        - pizza_amount: null
    - slot_was_set:
        - pizza_crust: null
    - slot_was_set:
        - current_order: null
    - action: action_next_order
    - action: utter_something_else
    - user: |
        no that's all
      intent: response_negative
    - action: action_total_order
    - slot_was_set:
        - total_order: five medium cracker crust Pepperoni
    - user: |
        takeaway
      intent: order_takeaway
    - slot_was_set:
        - takeaway_flag: true
    - action: takeaway_form
    - active_loop: takeaway_form
    - slot_was_set:
        - requested_slot: client_name
    - user: |
        [Francesca](client_name)
      intent: response_client_name
    - slot_was_set:
        - client_name: Francesca
    - action: takeaway_form
    - slot_was_set:
        - requested_slot: null
    - active_loop: null
    - action: action_confirm_takeaway
    - user: |
        yes
      intent: response_positive
    - action: utter_confirm_takeaway
    - action: action_ask_time_takeaway
    - active_loop: time_form
    - slot_was_set:
        - requested_slot: time
    - user: |
        at [eight thirty](time)
      intent: time
    - slot_was_set:
        - time: eight thirty
    - action: action_confirm_time
    - user: |
        yes
      intent: response_positive
    - action: utter_final_order
    - action: utter_goodbye

- story: test story 3
  steps:
    - user: |
        Hi
      intent: welcome_greet
    - action: utter_welcome_greet
    - user: |
        what can you do?
      intent: bot_skills
    - action: utter_inform_bot_skills
    - user: |
        I would like to order a pizza and a [beer](anti_pizza_type)
      intent: order_anti_pizza
    - slot_was_set:
        - anti_pizza_type: beer
    - action: utter_anti_pizza
    - action: utter_init_request
    - user: |
        Do you have [fried chicken](anti_pizza_type)?
      intent: order_anti_pizza
    - slot_was_set:
        - anti_pizza_type: chicken
    - action: utter_anti_pizza
    - action: utter_init_request
    - user: |
        I want a [large](pizza_size) [pepperoni](pizza_type) pizza
      intent: order_pizza
    - slot_was_set:
        - pizza_size: large
        - pizza_type: Pepperoni
    - action: pizza_order_form
    - active_loop: pizza_order_form
    - slot_was_set:
        - requested_slot: pizza_amount
    - user: |
        [one](pizza_amount) please
      intent: request_pizza_amount
    - slot_was_set:
        - pizza_amount: one
    - action: pizza_order_form
    - slot_was_set:
        - requested_slot: pizza_crust
    - user: |
        which crusts do you offer?
      intent: request_pizza_crusts
    - action: utter_inform_pizza_crust
    - action: pizza_order_form
    - slot_was_set:
        - requested_slot: pizza_crust
    - user: |
        [cracker](pizza_crust) crust please
      intent: request_pizza_crusts
    - slot_was_set:
        - pizza_crust: cracker
    - action: pizza_order_form
    - slot_was_set:
        - requested_slot: pizza_sliced
    - user: |
        yes
      intent: response_positive
    - slot_was_set:
        - pizza_sliced: true
    - action: pizza_order_form
    - slot_was_set:
        - requested_slot: null
    - active_loop: null
    - action: action_confirm_order
    - slot_was_set:
        - current_order:
            - one large cracker crust Pepperoni, all pizza sliced
    - user: |
        yes
      intent: response_positive
    - action: action_pizza_order_add
    - slot_was_set:
        - total_order:
            - one large cracker crust Pepperoni, all pizza sliced
    - slot_was_set:
        - pizza_type: null
    - slot_was_set:
        - pizza_size: null
    - slot_was_set:
        - pizza_amount: null
    - slot_was_set:
        - pizza_sliced: null
    - slot_was_set:
        - pizza_crust: null
    - slot_was_set:
        - current_order: null
    - action: action_next_order
    - action: utter_something_else
    - user: |
        no
      intent: response_negative
    - action: action_total_order
    - slot_was_set:
        - total_order: one large cracker crust Pepperoni, all pizza sliced
    - user: |
        takeaway
      intent: order_takeaway
    - slot_was_set:
        - takeaway_flag: true
    - action: takeaway_form
    - active_loop: takeaway_form
    - slot_was_set:
        - requested_slot: client_name
    - user: |
        [Giovanni](client_name)
      intent: response_client_name
    - slot_was_set:
        - client_name: Giovanni
    - action: takeaway_form
    - slot_was_set:
        - requested_slot: client_address
    - user: |
        to [roma street number five rovereto](client_address)
      intent: response_client_address
    - slot_was_set:
        - client_address: roma street number five rovereto
    - action: takeaway_form
    - slot_was_set:
        - requested_slot: client_payment
    - user: |
        [cash](client_payment)
      intent: response_client_payment
    - slot_was_set:
        - client_payment: cash
    - action: takeaway_form
    - slot_was_set:
        - requested_slot: null
    - active_loop: null
    - action: action_confirm_takeaway
    - user: |
        yes
      intent: response_positive
    - action: utter_confirm_takeaway
    - action: action_ask_time_takeaway
    - active_loop: time_form
    - slot_was_set:
        - requested_slot: time
    - user: |
        at [half past seven](time)
      intent: time
    - slot_was_set:
        - time: half past seven
    - action: action_confirm_time
    - user: |
        yes
      intent: response_positive
    - action: utter_final_order
    - action: utter_goodbye
