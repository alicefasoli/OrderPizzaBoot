version: "3.1"
stories:
- story: greeting
  steps:
  - intent: welcome_greet
  - action: utter_welcome_greet
  - checkpoint: init_order
- story: greeting plus
  steps:
  - intent: welcome_greet
  - action: utter_welcome_greet
  - intent: bot
  - action: utter_i_am_bot
  - action: utter_want_something
  - intent: request_pizza_types
  - action: action_get_menu
  - intent: init_pizza_question 
  - action: action_get_pizza_ingredients
  - action: utter_init_order
  - checkpoint: init_order
- story: greeting plus just bot
  steps:
  - intent: welcome_greet
  - action: utter_welcome_greet
  - intent: bot
  - action: utter_i_am_bot
  - action: utter_want_something
  - checkpoint: init_order
- story: pizza order amount
  steps:
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_amount 
  - intent: request_pizza_amount
  - action: utter_inform_pizza_amount
  - action: pizza_order_form
- story: pizza order crust
  steps:
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_crust 
  - intent: request_pizza_crusts
  - action: utter_inform_pizza_crust
  - action: pizza_order_form
- story: pizza order type
  steps:
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type 
  - intent: request_pizza_types
  - action: action_get_menu
  - action: pizza_order_form
- story: pizza order size
  steps:
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type 
  - intent: request_pizza_sizes
  - action: utter_inform_pizza_size
  - action: pizza_order_form
- story: pizza order toppings
  steps:
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_topping 
  - intent: request_pizza_topping
  - action: action_get_available_toppings
  - action: pizza_order_form
- story: start order without greeting
  steps: 
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
    - requested_slot: pizza_amount
    - requested_slot: pizza_size
    - requested_slot: pizza_crust
    - requested_slot: pizza_topping
  - active_loop: null
  - action: action_confirm_order
  - slot_was_set:
    - current_order: current_order
  - checkpoint: confirm_order
- story: start order
  steps:
  - checkpoint: init_order
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
    - requested_slot: pizza_amount
    - requested_slot: pizza_size
    - requested_slot: pizza_crust
    - requested_slot: pizza_topping
  - active_loop: null
  - action: action_confirm_order
  - slot_was_set:
    - current_order: current_order
  - checkpoint: confirm_order
- story: start order with info
  steps:
  - checkpoint: init_order
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
    - requested_slot: pizza_amount
    - requested_slot: pizza_size
    - requested_slot: pizza_crust
  - intent: request_pizza_crusts
  - action: utter_inform_pizza_crust
  - action: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_topping
  - active_loop: null
  - action: action_confirm_order
  - slot_was_set:
    - current_order: current_order
  - checkpoint: confirm_order
- story: stop order and new order with init
  steps:
  - checkpoint: init_order
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
    - requested_slot: pizza_amount
  - intent: stop
  - action: utter_ask_confirm
  - intent: stop
  - active_loop: null
  - action: action_reset_pizza_form
  - action: utter_order_cancelation_confirm
  - action: utter_something_else
  - intent: response_positive
  - action: utter_order_add
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
    - requested_slot: pizza_amount
    - requested_slot: pizza_size
    - requested_slot: pizza_crust
    - requested_slot: pizza_topping
  - active_loop: null
  - action: action_confirm_order
  - slot_was_set:
    - current_order: current_order
  - checkpoint: confirm_order
- story: order anti pizza
  steps:
  - checkpoint: init_order
  - intent: order_anti_pizza
  - action: utter_anti_pizza
  - action: action_get_menu
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
    - requested_slot: pizza_amount
    - requested_slot: pizza_size
    - requested_slot: pizza_crust
    - requested_slot: pizza_topping
  - active_loop: null
  - action: action_confirm_order
  - slot_was_set:
    - current_order: current_order
  - checkpoint: confirm_order
- story: order anti pizza two times
  steps:
  - checkpoint: init_order
  - intent: order_anti_pizza
  - action: utter_anti_pizza
  - action: action_get_menu
  - intent: order_anti_pizza
  - action: utter_anti_pizza
  - action: action_get_menu
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
  - intent: order_pizza_inform
  - action: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
    - requested_slot: pizza_amount
    - requested_slot: pizza_size
    - requested_slot: pizza_crust
    - requested_slot: pizza_topping
  - active_loop: null
  - action: action_confirm_order
  - slot_was_set:
    - current_order: current_order
  - checkpoint: confirm_order
- story: confirm order and complete
  steps:
  - checkpoint: confirm_order
  - intent: response_positive
  - action: action_pizza_order_add
  - slot_was_set:
    - total_order: total_order
    - total_price: total_price
    - pizza_type: null
    - pizza_size: null
    - pizza_amount: null
    - pizza_crust: null
    - pizza_topping: null
    - current_order: null
  - action: action_new_order
  - action: utter_something_else
  - intent: response_negative
  - action: action_total_order
  - checkpoint: complete_delivery
- story: not confirm order, something else and complete
  steps:
  - checkpoint: confirm_order
  - intent: response_positive
  - action: action_pizza_order_add
  - slot_was_set:
    - total_order: total_order
    - total_price: total_price
    - pizza_type: null
    - pizza_size: null
    - pizza_amount: null
    - pizza_crust: null
    - pizza_topping: null
    - current_order: null
  - action: action_new_order
  - action: utter_something_else
  - intent: response_positive
  - action: utter_order_add
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
    - requested_slot: pizza_amount
    - requested_slot: pizza_size
    - requested_slot: pizza_crust
    - requested_slot: pizza_topping
  - active_loop: null
  - action: action_confirm_order
  - slot_was_set:
    - current_order: current_order
  - intent: response_positive
  - action: action_pizza_order_add
  - slot_was_set:
    - total_order: total_order
    - total_price: total_price
    - pizza_type: null
    - pizza_size: null
    - pizza_amount: null
    - pizza_crust: null
    - pizza_topping: null
    - current_order: null
  - action: action_new_order
  - action: utter_something_else
  - intent: response_negative
  - action: action_total_order
  - checkpoint: complete_delivery
- story: change item
  steps:
  - checkpoint: confirm_order
  - intent: response_negative
  - action: utter_ask_changes_item
  - intent: item_change
  - action: action_change_order
  - action: action_confirm_order
  - slot_was_set:
    - current_order: current_order
  - intent: response_positive
  - action: action_pizza_order_add
  - slot_was_set:
    - total_order: total_order
    - total_price: total_price
    - pizza_type: null
    - pizza_size: null
    - pizza_amount: null
    - pizza_crust: null
    - pizza_topping: null
    - current_order: null
  - action: action_new_order
  - action: utter_something_else
  - intent: response_negative
  - action: action_total_order
  - checkpoint: complete_delivery
- story: change item vague
  steps:
  - checkpoint: confirm_order
  - intent: response_negative
  - action: utter_ask_changes_item
  - intent: item_change_request_without_entity
  - action: utter_ask_changes_item
  - intent: item_change
  - action: action_change_order
  - action: action_confirm_order
  - slot_was_set:
    - current_order: current_order
  - intent: response_positive
  - action: action_pizza_order_add
  - slot_was_set:
    - total_order: total_order
    - total_price: total_price
    - pizza_type: null
    - pizza_size: null
    - pizza_amount: null
    - pizza_crust: null
    - pizza_topping: null
    - current_order: null
  - action: action_new_order
  - action: utter_something_else
  - intent: response_negative
  - action: action_total_order
  - checkpoint: complete_delivery
- story: order delivery with change 
  steps:
  - checkpoint: complete_delivery
  - intent: order_delivery
  - action: delivery_form
  - active_loop: delivery_form
  - slot_was_set:
    - requested_slot: client_name
    - requested_slot: client_phone_number
    - requested_slot: client_address
    - requested_slot: client_payment
  - active_loop: null
  - action: action_confirm_delivery
  - intent: response_negative
  - action: utter_ask_changes_delivery
  - intent: delivery_change
    entities:
    - client_payment: card
  - action: action_change_delivery
  - action: action_confirm_delivery
  - intent: response_positive
  - action: action_ask_time
  - intent: time
  - action: action_confirm_time
  - checkpoint: checkpoint_time
- story: order delivery with change vague
  steps:
  - checkpoint: complete_delivery
  - intent: order_delivery
  - action: delivery_form
  - active_loop: delivery_form
  - slot_was_set:
    - requested_slot: client_name
    - requested_slot: client_phone_number
    - requested_slot: client_address
    - requested_slot: client_payment
  - active_loop: null
  - action: action_confirm_delivery
  - intent: response_negative
  - action: utter_ask_changes_delivery
  - intent: delivery_change_request_without_entity
  - action: utter_ask_changes_delivery
  - intent: delivery_change
    entities:
    - client_payment: card
  - action: action_change_delivery
  - action: action_confirm_delivery
  - intent: response_positive
  - action: action_ask_time
  - intent: time
  - action: action_confirm_time
  - checkpoint: checkpoint_time
- story: order delivery with no change 
  steps:
  - checkpoint: complete_delivery
  - intent: order_delivery
  - action: delivery_form
  - active_loop: delivery_form
  - slot_was_set:
    - requested_slot: client_name
    - requested_slot: client_phone_number
    - requested_slot: client_address
    - requested_slot: client_payment
  - active_loop: null
  - action: action_confirm_delivery
  - intent: response_positive
  - action: action_ask_time
  - intent: time
  - action: action_confirm_time
  - checkpoint: checkpoint_time
- story: order takeaway with change
  steps:
  - checkpoint: complete_delivery
  - intent: order_takeaway
  - slot_was_set:
    - takeaway_flag: true
  - action: takeaway_form
  - active_loop: takeaway_form
  - slot_was_set:
    - requested_slot: client_name
    - requested_slot: client_phone_number
  - active_loop: null
  - action: action_confirm_takeaway
  - intent: response_negative
  - action: utter_ask_changes_takeaway
  - intent: takeaway_change
  - action: action_change_takeaway
  - action: action_confirm_takeaway
  - intent: response_positive
  - action: action_ask_time
  - intent: time
  - action: action_confirm_time
  - checkpoint: checkpoint_time
- story: order takeaway with change vague
  steps:
  - checkpoint: complete_delivery
  - intent: order_takeaway
  - slot_was_set:
    - takeaway_flag: true
  - action: takeaway_form
  - active_loop: takeaway_form
  - slot_was_set:
    - requested_slot: client_name
    - requested_slot: client_phone_number
  - active_loop: null
  - action: action_confirm_takeaway
  - intent: response_negative
  - action: utter_ask_changes_takeaway
  - intent: takeaway_change_request_without_entity
  - action: utter_ask_changes_takeaway
  - intent: takeaway_change
  - action: action_change_takeaway
  - action: action_confirm_takeaway
  - intent: response_positive
  - action: action_ask_time
  - intent: time
  - action: action_confirm_time
  - checkpoint: checkpoint_time
- story: order takeaway with no change
  steps:
  - checkpoint: complete_delivery
  - intent: order_takeaway
  - slot_was_set:
    - takeaway_flag: true
  - action: takeaway_form
  - active_loop: takeaway_form
  - slot_was_set:
    - requested_slot: client_name
    - requested_slot: client_phone_number
  - active_loop: null
  - action: action_confirm_takeaway
  - intent: response_positive
  - action: action_ask_time
  - intent: time
  - action: action_confirm_time
  - checkpoint: checkpoint_time
- story: confirm time
  steps:
  - checkpoint: checkpoint_time
  - intent: response_positive
  - action: action_order_number
  - action: utter_final_order
  - intent: goodbye
  - action: utter_goodbye
  - action: action_restart
- story: change time
  steps:
  - checkpoint: checkpoint_time
  - intent: response_negative
  - action: utter_ask_changes_time
  - intent: time_change
    entities:
    - time: time
  - action: action_change_time
  - action: action_confirm_time
  - intent: response_positive
  - action: action_order_number
  - action: utter_final_order
  - intent: goodbye
  - action: utter_goodbye
  - action: action_restart
- story: change time vague
  steps:
  - checkpoint: checkpoint_time
  - intent: response_negative
  - action: utter_ask_changes_time
  - intent: time_change_request_without_entity
  - action: utter_ask_changes_time
  - intent: time_change
    entities:
    - time: time
  - action: action_change_time
  - action: action_confirm_time
  - intent: response_positive
  - action: action_order_number
  - action: utter_final_order
  - intent: goodbye
  - action: utter_goodbye
  - action: action_restart
- story: order stop and restart
  steps:
  - checkpoint: init_order
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
    - requested_slot: pizza_amount
    - requested_slot: pizza_size
    - requested_slot: pizza_crust
  - intent: stop
  - action: utter_ask_confirm
  - intent: stop
  - active_loop: null
  - action: action_reset_pizza_form
  - action: utter_order_cancelation_confirm
  - action: utter_something_else
  - intent: response_positive
  - action: utter_order_add
  - intent: order_pizza_inform
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - requested_slot: pizza_type
    - requested_slot: pizza_amount
    - requested_slot: pizza_size
    - requested_slot: pizza_crust
    - requested_slot: pizza_topping
  - active_loop: null
  - action: action_confirm_order
  - slot_was_set:
    - current_order: current_order
  - checkpoint: confirm_order
