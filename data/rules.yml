version: "3.1"
rules:
- rule: activate pizza form
  condition:
    - active_loop: null
  steps:
  - intent: order_pizza_question
  - action: pizza_order_form
  - active_loop: pizza_order_form
- rule: activate form delivery
  condition:
    - active_loop: null
  steps:
  - intent: order_delivery
  - action: delivery_form
  - active_loop: delivery_form
- rule: activate form takeaway
  condition:
    - active_loop: null
  steps:
  - intent: order_takeaway
  - action: takeaway_form
  - active_loop: takeaway_form
- rule: submit form pizza
  condition:
    - active_loop: pizza_order_form
  steps:
  - action: pizza_order_form      
  - active_loop: null
  - action: action_confirm_order 
- rule: submit form delivery
  condition:
    - active_loop: delivery_form
  steps:
  - action: delivery_form      
  - active_loop: null
  - action: action_confirm_delivery
- rule: submit form takeaway
  condition:
    - active_loop: takeaway_form
  steps:
  - action: takeaway_form      
  - active_loop: null
  - action: action_confirm_takeaway
- rule: out-of-scope
  steps:
  - intent: out_of_scope
  - action: utter_out_of_scope
- rule: pizza type questions
  steps:
    - intent: request_pizza_types
    - action: action_get_menu
- rule: pizza crust questions
  steps:
    - intent: request_pizza_crusts
    - action: utter_inform_pizza_crust
- rule: pizza crust prices questions
  steps:
    - intent: request_pizza_crusts_price
    - action: action_get_crusts_price
- rule: pizza size questions
  steps:
    - intent: request_pizza_sizes
    - action: utter_inform_pizza_size
- rule: pizza toppings questions
  steps:
    - intent: request_pizza_toppings
    - action: action_get_available_toppings
- rule: get ingredients
  steps:
  - intent: init_pizza_question
  - action: action_get_pizza_ingredients
- rule: delivery payment questions
  steps:
    - intent: request_payment_methods
    - action: utter_inform_client_payment
- rule: order anti pizza
  steps:
    - intent: order_anti_pizza
    - action: utter_anti_pizza
    - action: action_get_menu
- rule: change item
  steps:
  - intent: item_change
  - action: action_change_order
  - action: pizza_order_form
  - active_loop: pizza_order_form
- rule: change delivery 
  steps:
  - intent: delivery_change
  - action: action_change_delivery
  - action: delivery_form
  - active_loop: delivery_form
- rule: change takeaway
  steps:
  - intent: takeaway_change
  - action: action_change_takeaway
  - action: takeaway_form
  - active_loop: takeaway_form
- rule: ask time
  steps:
  - action: action_ask_time
  - intent: time
  - action: action_confirm_time
- rule: rephrase
  steps:
  - intent: nlu_fallback
  - action: utter_default
- rule: bot init
  steps:
  - intent: bot
  - action: utter_i_am_bot
  wait_for_user_input: false
- rule: bot skills
  steps:
  - intent: bot_skills
  - action: utter_inform_bot_skills
- rule: goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye