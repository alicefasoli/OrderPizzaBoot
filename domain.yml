session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true

version: "3.1"

intents:
  - welcome_greet
  - init_pizza_question
  - delivery_change
  - delivery_change_request_without_entity
  - takeaway_change
  - takeaway_change_request_without_entity
  - order_takeaway
  - order_delivery
  - order_anti_pizza
  - response_negative
  - response_positive
  - item_change
  - item_change_request_without_entity
  - out_of_scope
  - request_pizza_crusts
  - request_pizza_sizes
  - request_pizza_types
  - request_pizza_amount
  - request_pizza_toppings
  - request_payment_methods
  - response_client_address
  - response_client_name
  - response_client_payment
  - response_client_phone_number
  - time
  - time_change
  - time_change_request_without_entity
  - verbose
  - bot
  - bot_skills
  - restart
  - stop
  - return
  - goodbye

entities:
  - time
  - anti_pizza_type
  - pizza_size
  - pizza_type
  - pizza_amount
  - pizza_crust
  - pizza_toppings
  - second_pizza_size
  - second_pizza_type
  - second_pizza_amount
  - second_pizza_crust
  - second_pizza_toppings
  - client_name
  - client_phone_number
  - client_address
  - client_payment
  - order_number
  - active_form_pizza_order_form
  - active_form_delivery_form
  - active_form_takeaway_form


slots:
  time:
    type: text
    mappings:
    - type: from_entity
      entity: time
  anti_pizza_type:
    type: any
    mappings:
      - type: from_entity
        entity: anti_pizza_type
  pizza_amount:
    type: any
    mappings:
      - type: from_entity
        entity: pizza_amount
  pizza_size:
    type: any
    mappings:
      - type: from_entity
        entity: pizza_size
  pizza_type:
    type: any
    mappings:
      - type: from_entity
        entity: pizza_type
  pizza_crust:
    type: any
    mappings:
      - type: from_entity
        entity: pizza_crust
  client_name:
    type: text
    mappings:
    - type: from_entity
      entity: client_name
  client_phone_number:
    type: text
    mappings:
    - type: from_entity
      entity: client_phone_number
  client_address:
    type: text
    mappings:
    - type: from_entity
      entity: client_address
  client_payment:
    type: text
    mappings:
    - type: from_entity
      entity: client_payment
  order_number:
    type: text
    mappings:
    - type: from_entity
      entity: order_number
  modify_pizza_order:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_intent
      intent: item_change
      value: true
    - type: from_intent
      intent: item_change_request_without_entity
      value: true
  modify_delivery:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_intent
      intent: delivery_change
      value: true
    - type: from_intent
      intent: delivery_change_without_entity
      value: true
  modify_takeaway:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_intent
      intent: takeaway_change
      value: true
    - type: from_intent
      intent: takeaway_change_request_without_entity
      value: true
  total_order:
    type: any
    mappings:
      - type: custom
  current_order:
    type: list
    influence_conversation: true
    mappings:
    - type: custom
  takeaway_flag:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_intent
      intent: order_takeaway
      value: true

responses:
  utter_out_of_scope:
    - text: Sorry, I can't handle that request.
  utter_welcome_greet:
    - text: Hello There! Welcome to OrderPizzabot. How can I help you?
    - text: Hi there! Welcome to OrderPizzabot. How can I help you?
    - text: Hi there! Welcome to OrderPizzabot. What would you like to start with for your pizza order?
  utter_init_request:
    - text: In today's menu, we have Funghi, Hawaii, Margherita, Pepperoni, Vegetarian, Quattro Stagioni, Capricciosa, Crudo and Burrata, Marinara, Quattro Formaggi, Prosciutto and Mushrooms, Tonno and Onions, Boscaiola, Salsiccia e Friarielli, Gorgonzola e Noci, all available in sizes Small, Medium, Large or Extra Large. What would you like to have?
  utter_order_confirm_negative:
    - text: What would you like to change?
    - text: No problem, what would you like to change?
  utter_order_add:
    - text: Which pizza do you like to add in your order?
  utter_default:
    - text: Sorry, I didnâ€™t understand that. Can you please re-type it?
  utter_i_am_bot:
    - text: I am a bot, powered by Rasa, to help you order pizza.
    - text: I am a bot, powered by Rasa, to help you order pizza. I am still learning, so please bear with me.
  utter_inform_bot_skills:
    - text: I can help you order pizza, from choosing the type, size, crust, and toppings, to delivery and payment. I can also handle explanations, modifications and cancellations of the order, and answer questions about the pizza we have. I can also restart the conversation by saying to me '/restart'.
  utter_anti_pizza:
    - text: Sorry, we don't have {anti_pizza_type} in our menu.
  utter_ask_changes:
    - text: What would you like to change?
    - text: No problem. What would you like to change?
    - text: Okay. What would you like to change?
  utter_final_order:
    - text: Awesome! Your order is confirmed. Here is your order number {order_number}. Your total order is {total_order}.
    - text: Great! Your order is confirmed. Here is your order number {order_number}. Your total order is {total_order}.
    - text: Perfect! Your order is confirmed. Here is your order number {order_number}. Your total order is {total_order}.
    - text: Wonderful! Your order is confirmed. Here is your order number {order_number}. Your total order is {total_order}.
  utter_client_name:
    - text: What is your name?
  utter_client_phone:
    - text: What is your phone number?
  utter_inform_delivery_address:
    - text: What is your delivery address?
  utter_inform_delivery_payment:
    - text: We accept cash, credit card, and debit card for payment. How you want to proceed?
  utter_confirm_delivery:
    - text: Great. Now we need to know when you want your order delivered. 
    - text: Perfect, now we need to know when you want your order delivered. 
    - text: Alright, now we need to know when you want your order delivered. 
  utter_confirm_takeaway:
    - text: Great. Now we need to know when you will pick up your order. 
    - text: Perfect, now we need to know when you will pick up your order. 
    - text: Alright, now we need to know when you will pick up your order.      
  utter_inform_pizza_size:
    - text: The sizes that we have are the Small, Medium, Large, and Extra Large.
  utter_inform_pizza_crust:
    - text: The crusts that we have are Thin, Thick, Stuffed, Gluten-free, Whole wheat, Flatbread, Cracker
  utter_inform_pizza_amount:
    - text: We can produce from 1 to 20 pizzas of the same type.
  utter_something_else:
    - text: Is there anything else I can do for you?
  utter_ask_confirm:
    - text: Are you sure?
    - text: Do you confirm?
  utter_order_cancelation_confirm:
    - text: No problem. Your order has been canceled.
    - text: Okay. Your order has been canceled.
    - text: Alright. Your order has been canceled.
  utter_continue:
    - text: No problem. Let's continue.
    - text: Okay. Let's continue.
    - text: Alright. Let's continue.
    - text: Ok, I am not going to do any action about the previous request.
  utter_ask_time_takeaway:
    - text: What time would you like to pick up your order?
  utter_ask_time_delivery:
    - text: What time would you like your order to be delivered?
  utter_goodbye:
    - text: Bye! Thanks for choosing OrderPizzaBot. 
    - text: Goodbye! Thanks for choosing OrderPizzaBot. 
actions:
- utter_something_else
- utter_i_am_bot
- utter_inform_bot_skills
- utter_welcome_greet
- utter_init_request
- utter_anti_pizza
- utter_ask_changes
- utter_order_confirm_negative
- utter_final_order
- utter_client_name
- utter_client_phone
- utter_inform_delivery_address
- utter_inform_delivery_payment
- utter_confirm_delivery
- utter_confirm_takeaway 
- utter_inform_pizza_crust
- utter_inform_pizza_size
- utter_inform_pizza_amount
- utter_ask_confirm
- utter_order_cancelation_confirm
- utter_continue 
- utter_ask_time_delivery
- utter_ask_time_takeaway
- utter_order_add
- utter_default
- utter_goodbye
- utter_out_of_scope
- action_restart
- action_confirm_time
- action_change_time
- action_ask_time
- action_confirm_delivery
- action_change_delivery
- action_confirm_takeaway
- action_change_takeaway
- action_change_order
- action_confirm_order
- action_reset_pizza_form
- action_order_number
- action_total_order
- action_new_order
- action_cancel_current_order
- action_ask_client_name
- action_ask_client_address
- action_ask_client_payment
- action_ask_client_phone_number
- action_ask_pizza_amount
- action_ask_pizza_type
- action_ask_pizza_crust
- action_ask_pizza_size
- action_wait
- validate_pizza_order_form
- validate_delivery_form
- validate_takeaway_form

forms:
  pizza_order_form:
    required_slots:
    - pizza_amount
    - pizza_type
    - pizza_size
    - pizza_crust
  delivery_form:
    required_slots:
    - client_name
    - client_phone_number
    - client_address
    - client_payment
  takeaway_form:
    required_slots:
    - client_name
    - client_phone_number

